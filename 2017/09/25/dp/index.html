<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  <title>PIVIX</title>
  <meta name="description" content="A minimal hexo theme." />
  <meta name="keywords" content="hexo,theme,typescript,otakism,otaku" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="#清北学堂第一天——DP###主讲人——胡泽聪在我写这篇博客的时候，我已经从北京回到成都了，回顾这七天的学习，除了超出我现有知识体系的knowledge以外，更多的是了解了信息学竞赛究竟意味着什么，对我自己又有何意义。伴随着感叹，我开始了整理。 ##DP（个人理解）不同于数据结构和网络流（到现在还停留在模板题），dp是最让我震撼与头痛的，巧妙的思想，灵活的变形，与其他知识点纷繁复杂的搭配（特别是数">
<meta property="og:type" content="article">
<meta property="og:title" content="PIVIX">
<meta property="og:url" content="https://lemonoilP.github.io/2017/09/25/dp/index.html">
<meta property="og:site_name" content="PIVIX">
<meta property="og:description" content="#清北学堂第一天——DP###主讲人——胡泽聪在我写这篇博客的时候，我已经从北京回到成都了，回顾这七天的学习，除了超出我现有知识体系的knowledge以外，更多的是了解了信息学竞赛究竟意味着什么，对我自己又有何意义。伴随着感叹，我开始了整理。 ##DP（个人理解）不同于数据结构和网络流（到现在还停留在模板题），dp是最让我震撼与头痛的，巧妙的思想，灵活的变形，与其他知识点纷繁复杂的搭配（特别是数">
<meta property="og:updated_time" content="2017-02-11T12:19:40.204Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="PIVIX">
<meta name="twitter:description" content="#清北学堂第一天——DP###主讲人——胡泽聪在我写这篇博客的时候，我已经从北京回到成都了，回顾这七天的学习，除了超出我现有知识体系的knowledge以外，更多的是了解了信息学竞赛究竟意味着什么，对我自己又有何意义。伴随着感叹，我开始了整理。 ##DP（个人理解）不同于数据结构和网络流（到现在还停留在模板题），dp是最让我震撼与头痛的，巧妙的思想，灵活的变形，与其他知识点纷繁复杂的搭配（特别是数">
  
  
    <link rel="icon" href="/favicon.png">
  

	<script src="https://use.typekit.net/eyf3hir.js"></script>
  <script>try{Typekit.load({ async: false });}catch(e){}</script>
  <link rel="stylesheet" href="/style.css">
  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>
  

</head>

<body>
  
  <div id="loading-bar-wrapper">
  <div id="loading-bar"></div>
</div>

  <script>setLoadingBarProgress(20)</script>
  
  <div id="site-wrapper">
    
    <header id="header">
	<div id="header-wrapper" class="clearfix">
		<a id="logo" href="/">
			<img src="/images/logo.png" />
			<span id="site-desc">
			  otaku keeps alive
      </span>
		</a>
		<button id="site-nav-switch">
	    <span class="icon icon-menu"></span>
	  </button>
	</div>
	<aside id="site-menu">
  	<nav>
  		
        <a href="/" class="nav-home nav">
          Home
        </a>
      
        <a href="/about" class="nav-about nav">
          About
        </a>
      
        <a href="/archives" class="nav-archives nav">
          Archives
        </a>
      
    </nav>
	</aside>
</header>
    <script>setLoadingBarProgress(40);</script>
    
    <main id="main" role="main">
      <article id="post-dp"
  class="post article white-box article-type-post"
  itemscope itemprop="blogPost">
	<h2 class="title">
  	<a href="/2017/09/25/dp/">
    	
    </a>
  </h2>
	<time>
	  Sep 25, 2017
	</time>
	<section class="content">
  	<div class="article-entry" itemprop="articleBody">
    	<h2 id="清北学堂第一天——DP"><a href="#清北学堂第一天——DP" class="headerlink" title="#清北学堂第一天——DP"></a>#清北学堂第一天——DP</h2><h2 id="主讲人——胡泽聪"><a href="#主讲人——胡泽聪" class="headerlink" title="###主讲人——胡泽聪"></a>###主讲人——胡泽聪</h2><p>在我写这篇博客的时候，我已经从北京回到成都了，回顾这七天的学习，除了超出我现有知识体系的knowledge以外，更多的是了解了信息学竞赛究竟意味着什么，对我自己又有何意义。<br>伴随着感叹，我开始了整理。</p>
<p>##DP（个人理解）<br>不同于<strong>数据结构</strong>和<strong>网络流</strong>（到现在还停留在模板题），dp是最让我震撼与头痛的，巧妙的思想，灵活的变形，与其他知识点纷繁复杂的搭配（特别是<strong>数论</strong>），吸引着一代代OIer。</p>
<p>##DP的序章</p>
<p>###CodeChef June13 LEMOUSE</p>
<p><a href="https://www.codechef.com/JUNE13/problems/LEMOUSE" target="_blank" rel="external">https://www.codechef.com/JUNE13/problems/LEMOUSE</a></p>
<p>题目就略了，这道题目是dp，还是很明显的，但是如何做？用状压dp保存九宫格？曼哈顿距离是关键，回顾题目一只老鼠只会吓到大象一次，所以说，我们只需要记录走到这一步之前的f[i,j]来决定是否会重复记录已发现的老鼠，再仔细一想，对于dp[i,j]若在九宫格的四角上，那么我们只需要记录上一步是否被吓到就可以了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div></pre></td><td class="code"><pre><div class="line">#include &lt;stack&gt;</div><div class="line">#include &lt;cmath&gt;</div><div class="line">#include &lt;algorithm&gt;</div><div class="line">#include &lt;utility&gt;</div><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;cmath&gt;</div><div class="line">#include &lt;cstdlib&gt;</div><div class="line">#include &lt;cstring&gt;</div><div class="line">#define mod  1000000007</div><div class="line">#define PHI 1000000006</div><div class="line">#define ull unsigned long long</div><div class="line">#define ill long long int</div><div class="line">#define pii pair&lt;int,int&gt;</div><div class="line">#define pb(x) push_back(x)</div><div class="line">#define F(i,a,n) for(i=(a);i&lt;(n);++i)</div><div class="line">#define FD(i,a,n) for(i=(a);i&gt;=(n);--i)</div><div class="line">#define S(x) scanf(&quot;%d&quot;,&amp;x)</div><div class="line">#define S1(x) scanf(&quot;%llu&quot;,&amp;x)</div><div class="line">using namespace std;</div><div class="line">typedef unsigned long long int uint64;</div><div class="line"> </div><div class="line">int dp[101][101][3][3];</div><div class="line">char s[101][101];</div><div class="line">int n,m;</div><div class="line">int aa[] = &#123;0, 1&#125;;</div><div class="line">int bb[] = &#123;1, 0&#125;;</div><div class="line"> </div><div class="line">int f (int sx, int sy, int down, int right)</div><div class="line">&#123;</div><div class="line"> </div><div class="line">    down = min (down, 2);</div><div class="line">    right = min (right, 2);</div><div class="line">    int &amp;result = dp[sx][sy][down][right];</div><div class="line">    if (result != -1) &#123;</div><div class="line">        return result;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    result = 0;</div><div class="line"> </div><div class="line">    if (down == 2) &#123;</div><div class="line">        if (sy-1 &gt;= 0) &#123;</div><div class="line">            if (s[sx][sy-1] == &apos;1&apos;) &#123;</div><div class="line">                result++;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    if (right == 2) &#123;</div><div class="line">        if (sx-1 &gt;= 0) &#123;</div><div class="line">            if (s[sx-1][sy] == &apos;1&apos;) &#123;</div><div class="line">                result++;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    if (sx == n-1 &amp;&amp; sy == m-1) &#123;</div><div class="line">        return result;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    int i,xx=1000000;</div><div class="line"> </div><div class="line">    F (i, 0, 2) &#123;</div><div class="line">        int px,py;</div><div class="line">        px = sx + aa[i];    py = sy + bb[i];</div><div class="line">        if (px == n || py == m) &#123;</div><div class="line">            continue;</div><div class="line">        &#125;</div><div class="line">        if (s[px][py] == &apos;1&apos;) &#123;</div><div class="line">            result++;</div><div class="line">        &#125;</div><div class="line">        int r,d;</div><div class="line">        r = right;   d = down;</div><div class="line">        if (i == 0) &#123;</div><div class="line">            r++;</div><div class="line">            d = 0;</div><div class="line">        &#125;</div><div class="line">        if (i == 1) &#123;</div><div class="line">            d++;</div><div class="line">            r = 0;</div><div class="line">        &#125;</div><div class="line">        xx = min (xx, f (px, py, d, r));</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    result = result + xx;</div><div class="line">    return result;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"> </div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">    int t;</div><div class="line">    S (t);</div><div class="line">    while (t--) &#123;</div><div class="line">        S (n);  S (m);</div><div class="line"> </div><div class="line">        int i,j;</div><div class="line">        memset (dp, -1, sizeof(dp));</div><div class="line"> </div><div class="line">        F (i, 0, n) &#123;</div><div class="line">            scanf (&quot;%s&quot;, &amp;s[i]);</div><div class="line">        &#125;</div><div class="line"> </div><div class="line"> </div><div class="line">        int x = f (0, 0, 0, 0);</div><div class="line">        if (s[0][0] == &apos;1&apos;) &#123;</div><div class="line">            x++;</div><div class="line">        &#125;</div><div class="line">        printf (&quot;%d\n&quot;, x);</div><div class="line"> </div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>###TopCoder Open 2014 Round 1B L3<br><strong>EagleInZoo</strong></p>
<p><a href="https://community.topcoder.com/stat?c=problem_statement&amp;pm=13117" target="_blank" rel="external">https://community.topcoder.com/stat?c=problem_statement&amp;pm=13117</a></p>
<p>这道题有数学期望………………但是作为一道树上dp，我觉得很适合练手。首先这道题很明显有子问题，用dp[i,j]表示j只鹰从i节点出发留在树上的概率，所以dp[i,1]=1,当j&gt;1时，若ci=0，则dp[i,j]=0。<br>然后就是dp方程了：<br>dp[x,k]=$ \sum_{y\in_child \leaf(i\right)}\frac{1}{c<em>x} \sum</em>{i=0}^{k-2} \left( \frac{k-2}{i} \right) \left( \frac{1}{c_x} \right)^i \left( 1-\frac{1}{c_x} \right)^{k-2-i} $p[y,i+1]<br>(还没有下载latex，先将就着看，应该看得懂，描述已经够通俗了……)</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;numeric&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;utility&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bitset&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;deque&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cctype&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> CHECKTIME() printf(<span class="meta-string">"%.2lf\n"</span>, (double)clock() / CLOCKS_PER_SEC)</span></div><div class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; pii;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> llong;</div><div class="line"><span class="keyword">typedef</span> pair&lt;llong, llong&gt; pll;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> mkp make_pair</span></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_N = <span class="number">51</span>, MAX_K = <span class="number">101</span>;</div><div class="line"><span class="keyword">double</span> dp[MAX_N][MAX_K];</div><div class="line"><span class="keyword">double</span> C[MAX_K][MAX_K];		<span class="comment">// 二项系数，注意：用 long long 会溢出</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">EagleInZoo</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">	<span class="built_in">vector</span> &lt; <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; childs;</div><div class="line">	<span class="function"><span class="keyword">double</span> <span class="title">rec</span><span class="params">(<span class="keyword">int</span> v, <span class="keyword">int</span> t)</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		<span class="keyword">if</span> (<span class="number">1</span> == t) &#123;</div><div class="line">			<span class="keyword">return</span> <span class="number">1.0</span>;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">double</span> &amp; res = dp[v][t];</div><div class="line">		<span class="keyword">if</span> (res &gt; <span class="number">-0.5</span>) &#123;</div><div class="line">			<span class="keyword">return</span> res;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span> (childs[v].size() == <span class="number">0</span> &amp;&amp; t &gt; <span class="number">1</span>) &#123;	<span class="comment">// 该节点无 child 且t &gt; 1，最后一只一定无法停留</span></div><div class="line">			res = <span class="number">0</span>;</div><div class="line">			<span class="keyword">return</span> res;</div><div class="line">		&#125;</div><div class="line">		res = <span class="number">0</span>;</div><div class="line"></div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; childs[v].size(); i++) &#123;</div><div class="line">			<span class="keyword">int</span> x = childs[v][i];</div><div class="line">			<span class="keyword">int</span> c = childs[v].size();</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= t - <span class="number">2</span>; j++) &#123;</div><div class="line">				res += (<span class="number">1.0</span> / c) * C[t<span class="number">-2</span>][j] * <span class="built_in">pow</span>(<span class="number">1.0</span> / c, j) * <span class="built_in">pow</span>( <span class="number">1.0</span> * (c<span class="number">-1</span>) / c, t<span class="number">-2</span>-j) * rec(x, j + <span class="number">1</span>);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="keyword">return</span> res;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">double</span> <span class="title">calc</span><span class="params">(<span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt; parent, <span class="keyword">int</span> K)</span> </span>&#123;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; MAX_N; i++) &#123;</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; MAX_K; j++) &#123;</div><div class="line">				dp[i][j] = <span class="number">-1.0</span>;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		childs.resize(parent.size() + <span class="number">1</span>);</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; parent.size(); i++) &#123;</div><div class="line">			childs[ parent[i] ].push_back(i + <span class="number">1</span>);</div><div class="line">		&#125;</div><div class="line">		<span class="comment">// calculate C[]</span></div><div class="line">		C[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= K - <span class="number">1</span>; i++) &#123;</div><div class="line">			C[i][<span class="number">0</span>] = C[i][i] = <span class="number">1</span>;</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; i; j++) &#123;</div><div class="line">				C[i][j] = C[i - <span class="number">1</span>][j] + C[i - <span class="number">1</span>][j - <span class="number">1</span>];</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> rec(<span class="number">0</span>, K);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">//**复杂度O（nk^2）**</span></div></pre></td></tr></table></figure>
<p>补充试题： </p>
<p><a href="http://codeforces.com/contest/341/problem/C" target="_blank" rel="external">http://codeforces.com/contest/341/problem/C</a></p>
<p><a href="https://www.codechef.com/APRIL14/problems/ANUCBC" target="_blank" rel="external">https://www.codechef.com/APRIL14/problems/ANUCBC</a></p>
<p>##进击的DP</p>
<p>###CodeChef FEB14 LEMOVIE<br><strong>little elephant and movies</strong></p>
<p><a href="https://www.codechef.com/FEB14/problems/LEMOVIE" target="_blank" rel="external">https://www.codechef.com/FEB14/problems/LEMOVIE</a></p>
<p>严格大于，就是最长上升子序列，先考虑互不相同，然后在想如何去重，用dp[i,j]表示插入前i大的数，激动值为j的方案数。<br>每组数的贡献值最多为1，且满足了后无效性，之后的数不会改变之前的dp。复杂度也就<strong>O(nk)</strong>。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;climits&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bitset&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"> </div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> FOR(i,a,b) 	for(int i= (int )a ; i &lt; (int )b ; ++i)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,n) 	FOR(i,0,n)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> INF		INT_MAX</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ALL(x) 		x.begin(),x.end()</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> LET(x,a)	__typeof(a) x(a)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> IFOR(i,a,b) 	for(LET(i,a);i!=(b);++i)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> EACH(it,v) 	IFOR(it,v.begin(),v.end())</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> pb 		push_back</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> sz(x) 		int(x.size())</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> mp 		make_pair</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> fill(x,v)	memset(x,v,sizeof(x))</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> max(a,b)	((a)&gt;(b)?(a):(b))</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> min(a,b)	((a)&lt;(b)?(a):(b))</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span>	si(n)		scanf(<span class="meta-string">"%d"</span>,&amp;n)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> pi(n)		printf(<span class="meta-string">"%d "</span>,n)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> pil(n)		printf(<span class="meta-string">"%d\n"</span>,n)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> sd(n)		scanf(<span class="meta-string">"%lf"</span>,&amp;n)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> sl(n)		scanf(<span class="meta-string">"%lld"</span>,&amp;n)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> pl(n)		printf(<span class="meta-string">"%lld\n"</span>,n)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ss(n)		scanf(<span class="meta-string">"%s"</span>,n)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> scan(v,n)	vector<span class="meta-string">&lt;int&gt; v;rep(i,n)&#123; int j;si(j);v.pb(j);&#125;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> mod (int)(1e9 + 7)</span></div><div class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; PI;</div><div class="line"><span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; VI;</div><div class="line"><span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;VI&gt; VVI;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</div><div class="line">LL dp[<span class="number">202</span>][<span class="number">202</span>][<span class="number">202</span>],dp2[<span class="number">202</span>][<span class="number">202</span>][<span class="number">202</span>];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line"><span class="function"></span>&#123;</div><div class="line">	<span class="keyword">int</span> i,j,n,t,k;</div><div class="line">	<span class="keyword">for</span>(si(t);t--;)</div><div class="line">	&#123;</div><div class="line">		VI cnt,cum;</div><div class="line">		si(n);</div><div class="line">		si(k);</div><div class="line">		cnt.resize(<span class="number">201</span>);</div><div class="line">		rep(i,n)</div><div class="line">		&#123;</div><div class="line">			si(j);</div><div class="line">			cnt[j]++;</div><div class="line">		&#125;</div><div class="line">		fill(dp,<span class="number">0</span>);</div><div class="line">		fill(dp2,<span class="number">0</span>);</div><div class="line">		dp[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>] = dp2[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</div><div class="line">		cum.pb(<span class="number">0</span>);</div><div class="line">		FOR(i,<span class="number">1</span>,<span class="number">201</span>)</div><div class="line">			cum.pb(cum.back() + cnt[i]);</div><div class="line">		LL ans = <span class="number">0</span>;</div><div class="line">		rep(i,<span class="number">201</span>)</div><div class="line">		&#123;</div><div class="line">			rep(j,n+<span class="number">1</span>)</div><div class="line">			&#123;</div><div class="line">				rep(sum,cum[i]+<span class="number">1</span>)</div><div class="line">				&#123;</div><div class="line">					<span class="keyword">if</span>(sum)</div><div class="line">						dp[i][j][sum] = dp[i][j][sum<span class="number">-1</span>]*(cum[i]-sum+<span class="number">1</span>);</div><div class="line">					<span class="keyword">if</span>(j <span class="keyword">and</span> sum)</div><div class="line">					&#123;</div><div class="line">						dp[i][j][sum] += dp2[i<span class="number">-1</span>][j<span class="number">-1</span>][sum<span class="number">-1</span>]*cnt[i];</div><div class="line">						dp[i][j][sum] %= mod;</div><div class="line">					&#125;</div><div class="line">					dp2[i][j][sum] = (dp[i][j][sum] + dp2[i<span class="number">-1</span>][j][sum])%mod;</div><div class="line">					<span class="keyword">if</span>(j&lt;=k <span class="keyword">and</span> sum==n)</div><div class="line">						ans = (ans + dp[i][j][sum])%mod;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="built_in">cout</span> &lt;&lt; ans%mod &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>###Codeforces Round #211(Div. 1):problem C<br><strong>Circling Round Treasures</strong><br>一开始看到这道题的时候想到的是强连通分量，用trajan来缩点，但毕竟是dp题，缩点这种贪心的方式果然是有漏洞的（漏洞是什么请读者自己思考），然后就学习了<strong>射线法（本该是计算几何的内容）</strong>（话说知识点交叉是很频繁的啊，数据结构中讲了点分治…………），然后就可以判断点与多边形的位置关系，之后就dp大法好。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
  	</div>

	  <div class="article-tags tags">
		  
	  </div>
	</section>
</article>


<section id="comments">
	<div id="disqus_thread"></div>
</section>



      <script>setLoadingBarProgress(60);</script>
    </main>
    
    <footer id="footer" class="clearfix">
  
  
	<div class="search">
	  <form name="searchform" id="searchform" class="u-search-form">
	    <input type="text" id="searchinput" class="u-search-input" placeholder="Looking for something?" />
	    <button type="submit" id="u-search-btn-submit" class="u-search-btn-submit">
	      <span class="icon icon-search"></span>
	    </button>
	  </form>
	</div>
	

	<div class="social-wrapper">
  	
      
        <a href="https://github.com/artchen" class="social github"
          target="_blank" rel="external">
          <span class="icon icon-github"></span>
        </a>
      
        <a href="https://twitter.com/otakism" class="social twitter"
          target="_blank" rel="external">
          <span class="icon icon-twitter"></span>
        </a>
      
        <a href="/atom.xml" class="social rss"
          target="_blank" rel="external">
          <span class="icon icon-rss"></span>
        </a>
      
        <a href="https://plus.google.com/+ArtChenOtakism/posts" class="social google"
          target="_blank" rel="external">
          <span class="icon icon-google"></span>
        </a>
      
        <a href="http://weibo.com/otakism/" class="social sina-weibo"
          target="_blank" rel="external">
          <span class="icon icon-sina-weibo"></span>
        </a>
      
    
  </div>
  
  <div>Theme <span class="codename">Typescript</span> designed by <a href="http://rakugaki.me/" target="_blank">Art Chen</a>.</div>
  <div>&copy; <a href="/">PIVIX</a></div>
  
</footer>


    <script>setLoadingBarProgress(80);</script>
    
  </div>

  
<script>
  var disqus_shortname = 'https://lemonoilP.github.io';
  
  var disqus_url = 'https://lemonoilP.github.io/2017/09/25/dp/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>




<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script>window.jQuery || document.write('<script src="/js/jquery.min.js"><\/script>')</script>

<script src="/js/jquery.fitvids.js"></script>
<script>
	var GOOGLE_CUSTOM_SEARCH_API_KEY = "";
	var GOOGLE_CUSTOM_SEARCH_ENGINE_ID = "";
	var ALGOLIA_API_KEY = "";
	var ALGOLIA_APP_ID = "";
	var ALGOLIA_INDEX_NAME = "";
  var AZURE_SERVICE_NAME = "";
  var AZURE_INDEX_NAME = "";
  var AZURE_QUERY_KEY = "";
  var BAIDU_API_ID = "";
  var SEARCH_SERVICE = "google";
</script>
<script src="/js/search.js"></script>
<script src="/js/app.js"></script>


  <script>setLoadingBarProgress(100);</script>
  
</body>
</html>
